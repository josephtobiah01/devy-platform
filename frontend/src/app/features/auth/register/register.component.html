<div class="auth-container">
  <div class="auth-card">
    <h1>Create Your Account</h1>
    <p class="subtitle">Join Devy Platform today</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <!-- Error Message -->
      <div *ngIf="errorMessage" class="error-alert">
        {{ errorMessage }}
      </div>

      <!-- Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name *</label>
            <input 
              id="firstName"
              type="text" 
              formControlName="firstName"
              [class.error]="hasError('firstName', 'required')"
            />
            <span *ngIf="hasError('firstName', 'required')" class="error-message">
              First name is required
            </span>
          </div>

          <div class="form-group">
            <label for="lastName">Last Name *</label>
            <input 
              id="lastName"
              type="text" 
              formControlName="lastName"
              [class.error]="hasError('lastName', 'required')"
            />
            <span *ngIf="hasError('lastName', 'required')" class="error-message">
              Last name is required
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            id="email"
            type="email" 
            formControlName="email"
            placeholder="you@example.com"
            [class.error]="hasError('email', 'required') || hasError('email', 'email')"
          />
          <span *ngIf="hasError('email', 'required')" class="error-message">
            Email is required
          </span>
          <span *ngIf="hasError('email', 'email')" class="error-message">
            Please enter a valid email
          </span>
        </div>
      </div>

      <!-- Password -->
      <div class="form-section">
        <h3>Security</h3>
        
        <div class="form-group">
          <label for="password">Password *</label>
          <input 
            id="password"
            type="password" 
            formControlName="password"
            [class.error]="hasError('password', 'required') || hasError('password', 'minlength')"
          />
          <span *ngIf="hasError('password', 'required')" class="error-message">
            Password is required
          </span>
          <span *ngIf="hasError('password', 'minlength')" class="error-message">
            Password must be at least 6 characters
          </span>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password *</label>
          <input 
            id="confirmPassword"
            type="password" 
            formControlName="confirmPassword"
            [class.error]="hasError('confirmPassword', 'required') || passwordMismatch"
          />
          <span *ngIf="hasError('confirmPassword', 'required')" class="error-message">
            Please confirm your password
          </span>
          <span *ngIf="passwordMismatch" class="error-message">
            Passwords do not match
          </span>
        </div>
      </div>

      <!-- Location -->
      <div class="form-section">
        <h3>Location</h3>
        
        <div class="form-group">
          <label for="countryId">Country *</label>
          <select 
            id="countryId"
            formControlName="countryId"
            [class.error]="hasError('countryId', 'required')"
          >
            <option value="">Select a country</option>
            <option *ngFor="let country of countries" [value]="country.id">
              {{ country.name }}
            </option>
          </select>
          <span *ngIf="hasError('countryId', 'required')" class="error-message">
            Country is required
          </span>
        </div>

        <div class="form-group">
          <label for="cityId">City *</label>
          <select 
            id="cityId"
            formControlName="cityId"
            [class.error]="hasError('cityId', 'required')"
            [disabled]="!registerForm.get('countryId')?.value"
          >
            <option value="">Select a city</option>
            <option *ngFor="let city of cities" [value]="city.id">
              {{ city.name }}
            </option>
          </select>
          <span *ngIf="hasError('cityId', 'required')" class="error-message">
            City is required
          </span>
        </div>
      </div>

      <!-- Work Preference -->
      <div class="form-section">
        <h3>Work Preferences</h3>
        
        <div class="form-group">
          <label for="workPreferenceId">Work Preference *</label>
          <select 
            id="workPreferenceId"
            formControlName="workPreferenceId"
            [class.error]="hasError('workPreferenceId', 'required')"
          >
            <option value="">Select your preference</option>
            <option *ngFor="let pref of workPreferences" [value]="pref.id">
              {{ pref.name }}
            </option>
          </select>
          <span *ngIf="hasError('workPreferenceId', 'required')" class="error-message">
            Work preference is required
          </span>
        </div>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="btn-primary"
        [disabled]="isLoading || registerForm.invalid"
      >
        {{ isLoading ? 'Creating Account...' : 'Create Account' }}
      </button>
    </form>

    <p class="login-link">
      Already have an account? 
      <a routerLink="/auth/login">Sign in</a>
    </p>
  </div>
</div>